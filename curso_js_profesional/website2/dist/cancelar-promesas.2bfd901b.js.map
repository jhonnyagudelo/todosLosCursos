{"version":3,"sources":["ejercicio/cancelar-promesas/index.js"],"names":["url","img","document","getElementById","loadButton","stopButton","controller","startLoading","disabled","innerText","stopLoading","onclick","AbortController","response","fetch","signal","blob","imgUrl","URL","createObjectURL","src","error","console","log","message","abort"],"mappings":"AAAA,MAAMA,GAAG,GACP,yFADF,EAEA;;AACA,MAAMC,GAAG,GAAGC,QAAQ,CAACC,cAAT,CAAwB,YAAxB,CAAZ;AACA,MAAMC,UAAU,GAAGF,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAnB;AACA,MAAME,UAAU,GAAGH,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CAAnB;AACA,IAAIG,UAAJ,EAEA;;AACA,SAASC,YAAT,GAAwB;AACtBH,EAAAA,UAAU,CAACI,QAAX,GAAsB,IAAtB,CADsB,CAEtB;;AACAJ,EAAAA,UAAU,CAACK,SAAX,GAAuB,YAAvB;AACAJ,EAAAA,UAAU,CAACG,QAAX,GAAsB,KAAtB;AACD,EACD;;;AACA,SAASE,WAAT,GAAuB;AACrBN,EAAAA,UAAU,CAACI,QAAX,GAAsB,KAAtB;AACAJ,EAAAA,UAAU,CAACK,SAAX,GAAuB,iBAAvB;AACAJ,EAAAA,UAAU,CAACG,QAAX,GAAsB,IAAtB;AACD;;AAEDJ,UAAU,CAACO,OAAX,GAAqB,kBAAkB;AACrC;AACA;AACAJ,EAAAA,YAAY,GAHyB,CAKrC;AACA;;AACAD,EAAAA,UAAU,GAAG,IAAIM,eAAJ,EAAb;;AACA,MAAI;AACF;AACA;AACA;AACA;AACA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACd,GAAD,EAAM;AAAEe,MAAAA,MAAM,EAAET,UAAU,CAACS;AAArB,KAAN,CAA5B,CALE,CAMF;;AACA,UAAMC,IAAI,GAAG,MAAMH,QAAQ,CAACG,IAAT,EAAnB,CAPE,CAQF;;AACA,UAAMC,MAAM,GAAGC,GAAG,CAACC,eAAJ,CAAoBH,IAApB,CAAf,CATE,CAUF;;AACAf,IAAAA,GAAG,CAACmB,GAAJ,GAAUH,MAAV;AACD,GAZD,CAYE,OAAOI,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB;AACD,GAtBoC,CAwBrC;;;AACAd,EAAAA,WAAW;AACZ,CA1BD;;AA4BAL,UAAU,CAACM,OAAX,GAAqB,YAAY;AAC/B;AACA;AACAL,EAAAA,UAAU,CAACmB,KAAX;AAEAf,EAAAA,WAAW;AACZ,CAND","file":"cancelar-promesas.2bfd901b.js","sourceRoot":"..","sourcesContent":["const url =\n  \"https://images.pexels.com/photos/974470/nature-stars-milky-way-galaxy-974470.jpeg?q=100\";\n// Elementos del DOM imagen y 2 botones\nconst img = document.getElementById(\"huge-image\");\nconst loadButton = document.getElementById(\"load\");\nconst stopButton = document.getElementById(\"stop\");\nlet controller;\n\n// Función que habilita o desabilita un boton\nfunction startLoading() {\n  loadButton.disabled = true;\n  // Camnbia el texto de su contenido\n  loadButton.innerText = \"Loading...\";\n  stopButton.disabled = false;\n}\n// Funcíon que desabilita el boton de carga\nfunction stopLoading() {\n  loadButton.disabled = false;\n  loadButton.innerText = \"Load HUGE Image\";\n  stopButton.disabled = true;\n}\n\nloadButton.onclick = async function () {\n  // Se ejecuta startLoading que lo unico que hace es cambiar la apariencia del boton\n  // Para que se vea que esta cargando\n  startLoading();\n\n  // Declaramos la variable antes para despues tener acceso a ella\n  // en el boton de cancelar petición fetch\n  controller = new AbortController();\n  try {\n    // Hacemos la petición asincrona a la URL usando Async await\n    // Vamos a añadirle un objeto de configuración al fetch\n    // Esté objeto de configuración le vamos a pasar un objeto que se llama la señal\n    // La señal va a venir del abort controller\n    const response = await fetch(url, { signal: controller.signal });\n    // Vamos a obtener el binario de la imagen con blob img en forma binaria\n    const blob = await response.blob();\n    // Convertimos el blob binario a una URL, el navegador se encarga de asignar el blob una url\n    const imgUrl = URL.createObjectURL(blob);\n    // Ahora el src se lo asignamos a la url de la imagen\n    img.src = imgUrl;\n  } catch (error) {\n    console.log(error.message);\n  }\n\n  // Cuando la función asincrona se falle vamos a cambiar el boton a stop\n  stopLoading();\n};\n\nstopButton.onclick = function () {\n  // Si deseamos detener tenemos que llamar al abort controller.container\n  // El abort envia una señal al fetch y hace que la petición se cancele\n  controller.abort();\n\n  stopLoading();\n};\n"]}